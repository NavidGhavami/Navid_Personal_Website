function open_waiting(n="body"){$(n).waitMe({effect:"img",text:"لطفا منتظر بمانید ...",bg:"rgba(255,255,255,0.7)",color:"#000",source:"/Theme/assets/image/wait-me.png",fontSize:"22px"})}function close_waiting(n="body"){$(n).waitMe("hide")}function ShowMessage(n,t,i){window.createNotification({closeOnClick:!0,displayCloseButton:!1,positionClass:"nfc-bottom-right",showDuration:5e3,theme:i!==""?i:"success"})({title:n!==""?n:"اعلان",message:decodeURI(t)})}function FillPageId(n){$("#PageId").val(n);$("#filter-form").submit()}function removeProductColor(n){$('[color-name-hidden-input="'+n+'"]').remove();$('[color-price-hidden-input="'+n+'"]').remove();$('[color-code-hidden-input="'+n+'"]').remove();$('[color-table-item="'+n+'"]').remove();reOrderProductColorHiddenInputs()}function removeProductFeature(n){$('[feature-title-hidden-input="'+n+'"]').remove();$('[feature-value-hidden-input="'+n+'"]').remove();$('[feature-table-item="'+n+'"]').remove();reOrderProductFeatureHiddenInputs()}function removeProductSize(n){$('[size-title-hidden-input="'+n+'"]').remove();$('[size-price-hidden-input="'+n+'"]').remove();$('[size-table-item="'+n+'"]').remove();reOrderProductSizeHiddenInputs()}function reOrderProductColorHiddenInputs(){var n=$("[color-name-hidden-input]");$.each(n,function(n,t){var r=$(t),i=$(t).attr("color-name-hidden-input"),u=$('[color-price-hidden-input="'+i+'"]'),f=$('[color-code-hidden-input="'+i+'"]');$(r).attr("name","ProductColors["+n+"].ColorName");$(u).attr("name","ProductColors["+n+"].Price");$(f).attr("name","ProductColors["+n+"].ColorCode")})}function reOrderProductFeatureHiddenInputs(){var n=$("[feature-title-hidden-input]");$.each(n,function(n,t){var i=$(t),r=$(t).attr("feature-title-hidden-input"),u=$('[feature-value-hidden-input="'+r+'"]');$(i).attr("name","ProductFeatures["+n+"].FeatureTitle");$(u).attr("name","ProductFeatures["+n+"].FeatureValue")})}function reOrderProductSizeHiddenInputs(){var n=$("[size-title-hidden-input]");$.each(n,function(n,t){var i=$(t),r=$(t).attr("size-title-hidden-input"),u=$('[size-price-hidden-input="'+r+'"]');$(i).attr("name","ProductSizes["+n+"].SizeTitle");$(u).attr("name","ProductSizes["+n+"].SizePrice")})}function changeProductPriceBasedOnColor(n,t){var i=parseInt($("#ProductBasePrice").val()),r=(i+t).toLocaleString();$(".se-cart-price-new").html(r+" تومان");$("#add_product_to_order_ProductColorId").val(n);productColorPrice=t}function changeProductPriceBasedOnSize(n,t){var e=parseInt($("#ProductBasePrice").val()),i=parseInt($("#DiscountPrice").val()),o=n.toLocaleString("fa")+"تومان";isNaN(i)&&(i=0);var r=parseInt(n*i/100),u=parseInt(n-r),f=(u+productColorPrice).toLocaleString();$(".se-cart-price-new").html(f+" تومان");$("#OldPrice").html(n.toLocaleString()+" تومان");$("#add_product_to_order_ProductSizeId").val(t)}function onSuccessAddProductToOrder(n){n.status==="Success"?(ShowMessage("اعلان موفقیت",n.message),setTimeout(function(){close_waiting()},3e3)):ShowMessage("اعلان هشدار",n.message,"warning")}function removeProductFromOrder(n){$.get("/user/remove-order-item/"+n).then(()=>{location.reload()})}function checkDetailCount(){$("input[order-detail-count]").on("change",function(n){open_waiting();var t=$(this).attr("order-detail-count");$.get("/user/change-detail-count/"+t+"/"+n.target.value).then(n=>{$("#user-open-order-wrapper").html(n),setTimeout(function(){close_waiting();checkDetailCount();reloadPage()},500)})})}function reloadPage(){location.reload()}function wait_me(){open_waiting();setTimeout(function(){close_waiting()},3e3)}function readURL(n){if(n.files&&n.files[0]){var t=new FileReader;t.onload=function(t){$(".image-upload-wrap").hide();$(".file-upload-image").attr("src",t.target.result);$(".file-upload-content").show();$(".image-title").html(n.files[0].name)};t.readAsDataURL(n.files[0])}else removeUpload()}function removeUpload(){$(".file-upload-input").replaceWith($(".file-upload-input").clone());$(".file-upload-content").hide();$(".image-upload-wrap").show()}function countdown(){timeLeft==-1?(clearTimeout(timerId),sendActiveCode.remove(),elem.innerHTML="",elem.append(notification),elem.append(newTag)):(elem.innerHTML=timeLeft+"  ثانیه ",timeLeft--)}function addToWishlist(n,t,i,r,u){let f=$.cookie(cookieWishlist);f=f===undefined?[]:JSON.parse(f);var e=1;const o=f.find(t=>t.id===n);if(o!==undefined)f.find(t=>t.id===n).count=parseInt(o.count)+e;else{const o={id:n,productTitle:t,price:i,storeName:r,image:u,count:e};f.push(o)}swal({title:"پیغام موفقیت",text:"محصول مورد نظر به لیست علاقه مندی ها اضافه شد",icon:"success",button:"تایید"});$.cookie(cookieWishlist,JSON.stringify(f),{expires:60,path:"/"});updateWishlist()}function updateWishlist(){let n=$.cookie(cookieWishlist);n=JSON.parse(n);const t=$("#wishlist_count").text(n.length),i=n.find(n=>n.id===id);if(i!==undefined)n.find(n=>n.id===id).count=parseInt(i.count)+parseInt(t);else{const i={id,productTitle,price,storeName,image,count:t};n.push(i);$.cookie(cookieWishlist,JSON.stringify(n),{expires:60,path:"/"})}}function removeFromWishlist(n){let t=$.cookie(cookieWishlist);t=JSON.parse(t);const i=t.findIndex(t=>t.id===n);t.splice(i,1);swal({title:"پیغام موفقیت",text:"محصول مورد نظر از لیست علاقه مندی ها حذف گردید",icon:"error",button:"تایید"});$.cookie(cookieWishlist,JSON.stringify(t),{expires:60,path:"/"});setTimeout(function(){location.reload()},1e3);updateWishlist()}function showPreview(n,t){if(n.target.files.length>0){var r=URL.createObjectURL(n.target.files[0]),i=document.getElementById("file-ip-"+t+"-preview");i.src=r;i.style.display="block"}}function SuggestProduct(){var t=document.getElementById("btnAgree"),n=document.getElementById("lblSuggest");t.innerHTML='<div class="spinner-border text-light" role="status"><span class="sr-only" ><\/span ><\/div> ';setTimeout(function(){swal({title:"محصول فوق را پیشنهاد می دهم",text:"با تشکر از شما، نظر شما به کاربران سایت کمک می کند تا خرید بهتری داشته باشند",icon:"success",button:"تایید"});n.innerHTML="با تشکر از شما بابت پیشنهاد محصول. خیلی ممنونیم !";n.style.backgroundColor="green";n.style.color="white";n.style.fontSize="20px";n.style.padding="5px";t.style.visibility="hidden";btnDisagree.style.visibility="hidden";$("#isRecommended").attr("checked","true");$("#isRecommended").attr("value","true")},2e3)}function UnSuggestProduct(){var t=document.getElementById("btnDisagree"),n=document.getElementById("lblSuggest");t.innerHTML='<div class="spinner-border text-light" role="status"><span class="sr-only" ><\/span ><\/div> ';setTimeout(function(){swal({title:"محصول فوق را پیشنهاد نمی دهم",text:"با تشکر از شما، نظر شما به کاربران سایت کمک می کند تا خرید بهتری داشته باشند",icon:"error",button:"تایید"});n.innerHTML="بابت شرکت در نظرسنجی پیشنهاد محصول سپاسگزاریم !";n.style.backgroundColor="red";n.style.color="white";n.style.fontSize="20px";n.style.padding="5px";btnAgree.style.visibility="hidden";t.style.visibility="hidden";btnAgree.style.visibility="hidden";$("#isRecommended").attr("checked","false");$("#isRecommended").attr("value","false")},2e3)}function CommentValidation(){const n=document.getElementById("floatingInputEmail"),t=document.getElementById("floatingTextarea2"),i=document.getElementById("floatingInputName"),r=n.value.trim(),u=t.value.trim(),f=i.value.trim();return r!==""&&!r.match(/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/)?(emailValidation.innerHTML="فرمت ایمیل صحیح نمی باشد",n.focus(),!1):u.length===0?(commentValidation.innerHTML="لطفا متن نظر خود را بنویسید",t.focus(),!1):f.length===0?(fullnameValidation.innerHTML="لطفا نام و نام خانوادگی خود را وارد نمایید",i.focus(),!1):!0}function setCookie(n,t,i){var u="",r;i&&(r=new Date,r.setTime(r.getTime()+i*864e5),u="; expires="+r.toUTCString());document.cookie=n+"="+(t||"")+u+"; path=/"}function getCookie(n){for(var t,r=n+"=",u=document.cookie.split(";"),i=0;i<u.length;i++){for(t=u[i];t.charAt(0)===" ";)t=t.substring(1,t.length);if(t.indexOf(r)===0)return t.substring(r.length,t.length)}return null}function handleRadioClick(n){$(".buttonFilter label").css("background-color","");$(n).next("label").css("background-color","aqua");setCookie("selectedValue",$(n).val(),7)}function CheckChild(n){n==="1"?$("#ChildNumber").show():$("#ChildNumber").hide()}function CheckInsurancePeriod(n){n==="0"?$("#InsuranceTimePayment").show():$("#InsuranceTimePayment").hide()}function CheckMilitaryType(n){n==="1"?$("#ExemptType").show():$("#ExemptType").hide()}var newTag,timerId,selectedValue;const cookieWishlist="wishlist-items";let productColorPrice=0;$(document).ready(function(){var n=$("[ckeditor]");n.length>0&&$.getScript("/Theme/assets/js/ckeditor.js",function(){$(n).each(function(n,t){var i=$(t).attr("ckeditor");ClassicEditor.create(document.querySelector('[ckeditor="'+i+'"]'),{toolbar:{items:["heading","|","bold","italic","link","|","fontSize","fontColor","|","imageUpload","blockQuote","insertTable","undo","redo","codeBlock"]},language:"fa",table:{contentToolbar:["tableColumn","tableRow","mergeTableCells"]},licenseKey:"",simpleUpload:{uploadUrl:"/Uploader/UploadImage"}}).then(n=>{window.editor=n}).catch(n=>{console.error(n)})})})});$("[main_category_checkbox]").on("change",function(){var t=$(this).is(":checked"),n=$(this).attr("main_category_checkbox");console.log(n);t?$("#sub_categories_"+n).slideDown(300):($("#sub_categories_"+n).slideUp(300),$('[parent-category-id="'+n+'"]').prop("checked",!1))});const productCheckboxes=document.querySelectorAll('input[name="SelectedProducts"]');productCheckboxes.forEach(n=>{n.addEventListener("change",function(){const n=this.value,t=document.querySelector(`#productSizes_${n}`);t.style.display=this.checked?"block":"none"})});$("#add_color_button").on("click",function(n){var f;n.preventDefault();var t=$("#product_color_name_input").val(),i=$("#product_color_price_input").val(),r=$("#product_color_code_input").val();if(t!==""&&i!==""&&r!==""){var e=$("#list_of_product_colors tr"),u=e.length,o=$('[color-name-hidden-input][value="'+t+'"]');if(o.lenght!==0){var s=`<input type="hidden" value="${t}" name="ProductColors[${u}].ColorName" color-name-hidden-input="${t}-${i}">`,h=`<input type="hidden" value="${i}" name="ProductColors[${u}].Price" color-price-hidden-input="${t}-${i}">`,c=`<input type="hidden" value="${r}" name="ProductColors[${u}].ColorCode" color-code-hidden-input="${t}-${i}">`;$("#create_product_form").append(s);$("#create_product_form").append(h);$("#create_product_form").append(c);f=`
          <tr color-table-item="${t}-${i}">
          <td>${t}</td> 
          <td>${i}</td>  
          <td>
          <div style="border-radius: 50%; width:40px; height: 40px; border:2px solid black; background-color: ${r}"></div>
          </td>
          <td> <a class="btn btn-lg text-danger" style="float: none;" title="حذف رنگ" onclick="removeProductColor('${t}-${i}')">
          <i class="bi bi-x-octagon-fill"></i>
          </a>
          </td>
          </tr>`;$("#list_of_product_colors").append(f);$("#product_color_name_input").val("");$("#product_color_price_input").val("");$("#product_color_code_input").val("")}else ShowMessage("اخطار","رنگ وارد شده تکراری می باشد","warning"),$("#product_color_name_input").val(""),$("#product_color_price_input").val(""),$("#product_color_code_input").val(""),$("#product_color_name_input").val("").focus()}else ShowMessage("اخطار","لطفا نام رنگ و قیمت آن را به درستی وارد نمایید","warning")});$("#add_feature_button").on("click",function(n){var t,i,u,f,e;if(n.preventDefault(),t=$("#product_feature_title_input").val(),i=$("#product_feature_value_input").val(),t!==""&&i!==""){var o=$("#list_of_product_features tr"),r=o.length,s=$('[feature-title-hidden-input][value="'+t+'"]');s.lenght!==0?(u=`<input type="hidden" value="${t}" name="ProductFeatures[${r}].featureTitle" feature-title-hidden-input="${t}-${i}">`,f=`<input type="hidden" value="${i}" name="ProductFeatures[${r}].FeatureValue" feature-value-hidden-input="${t}-${i}">`,$("#create_product_form").append(u),$("#create_product_form").append(f),e=`
          <tr feature-table-item="${t}-${i}">
          <td>${t}</td>
          <td>${i}</td>
          <td> <a class="btn btn-lg text-danger" style="float: none;" title="حذف ویژگی" onclick="removeProductFeature('${t}-${i}')">
          <i class="bi bi-x-octagon-fill"></i>
          </a>
          </td>
          </tr>`,$("#list_of_product_features").append(e),$("#product_feature_title_input").val(""),$("#product_feature_value_input").val("")):(ShowMessage("اخطار","ویژگی وارد شده تکراری می باشد","warning"),$("#product_feature_title_input").val(""),$("#product_feature_value_input").val(""),$("#product_feature_title_input").val("").focus())}else ShowMessage("اخطار","لطفا نام ویژگی و مقدار آن را به درستی وارد نمایید","warning")});$("#add_size_button").on("click",function(n){var t,i,u,f,e;if(n.preventDefault(),t=$("#product_size_title_input").val(),i=$("#product_size_price_input").val(),t!==""&&i!==""){var o=$("#list_of_product_sizes tr"),r=o.length,s=$('[size-title-hidden-input][value="'+t+'"]');s.lenght!==0?(u=`<input type="hidden" value="${t}" name="ProductSizes[${r}].sizeTitle" size-title-hidden-input="${t}-${i}">`,f=`<input type="hidden" value="${i}" name="ProductSizes[${r}].Price" size-price-hidden-input="${t}-${i}">`,$("#create_product_form").append(u),$("#create_product_form").append(f),e=`
          <tr size-table-item="${t}-${i}">
          <td>${t}</td>
          <td>${i}</td>
          <td> <a class="btn btn-lg text-danger" style="float: none;" title="حذف سایز" onclick="removeProductSize('${t}-${i}')">
          <i class="bi bi-x-octagon-fill"></i>
          </a>
          </td>
          </tr>`,$("#list_of_product_sizes").append(e),$("#product_size_title_input").val(""),$("#product_size_price_input").val("")):(ShowMessage("اخطار","سایز وارد شده تکراری می باشد","warning"),$("#product_size_title_input").val(""),$("#product_size_price_input").val(""),$("#product_size_title_input").val("").focus())}else ShowMessage("اخطار","لطفا عنوان سایز  و قیمت آن را به درستی وارد نمایید","warning")});$("#OrderBy").on("change",function(){$("#filter-form").submit()});window.$("input[type=radio]").change(function(){window.$("#pageId").val(1);window.$("#filter-form").submit()});$("#number_of_products_in_basket").on("change",function(n){var t=parseInt(n.target.value,0);$("#add_product_to_order_Count").val(t)});$("#submitOrderForm").on("click",function(){$("#addProductToOrderForm").submit();open_waiting()});checkDetailCount();var productNameOption={url:function(n){return`/seller/products-autocomplete?productName=${n}`},getValue:function(n){return n.title},list:{match:{enabled:!0},onSelectItemEvent:function(){var n=$("#ProductName").getSelectedItemData().id;$("#ProductId").val(n).trigger("change")}},theme:"plate-dark"},productBrandNameOption={url:function(n){return`/seller/brands-autocomplete?brandName=${n}`},getValue:function(n){return n.brandName},list:{match:{enabled:!0},onSelectItemEvent:function(){var n=$("#ProductBrandName").getSelectedItemData().id;$("#BrandId").val(n).trigger("change")}},theme:"plate-dark"},$item=$(".carousel-item"),$wHeight=$(window).height();$item.eq(0).addClass("active");$item.height($wHeight);$item.addClass("full-screen");$(".carousel img").each(function(){var n=$(this).attr("src"),t=$(this).attr("data-color");$(this).parent().css({"background-image":"url("+n+")","background-color":t});$(this).remove()});$(".carousel").carousel({interval:6e3,pause:"false"});$(".image-upload-wrap").bind("dragover",function(){$(".image-upload-wrap").addClass("image-dropping")});$(".image-upload-wrap").bind("dragleave",function(){$(".image-upload-wrap").removeClass("image-dropping")});$(document).ready(function(){var n=document.getElementById("isRecommend");n.style.visibility="hidden";document.querySelector("#btn-register").disabled=!0;$("[register_checkbox]").on("change",function(){var n=$(this).is(":checked");document.querySelector("#btn-register").disabled=n?!1:!0})});var timeLeft=90,elem=document.getElementById("some_div"),sendActiveCode=document.getElementById("send_active_code"),notification=document.createElement("p");notification.className="text-dark";notification.textContent="اگر کد فعالسازی حساب کاربری خود را دریافت نکرده اید، لطفا از طریق دکمه زیر به پشتیبانی سایت پیام دهید یا تماس حاصل فرمایید تا حساب کاربری تان را فعال نمایند.";notification.style.paddingBottom="20px";newTag=document.createElement("a");newTag.id="resend_btn";newTag.className="btnSubmit btn btn-round btn-block text-danger";newTag.textContent="تماس با پشتیبانی";newTag.href="https://jibicenter.com/Contact-Us";elem.style.fontSize="20px";elem.style.color="black";timerId=setInterval(countdown,1e3);const actualBtn=document.getElementById("actual-btn"),fileChosen=document.getElementById("file-chosen");actualBtn.addEventListener("change",function(){fileChosen.textContent=this.files[0].name});document.querySelectorAll(".popup-trigger").forEach(n=>{n.addEventListener("mouseover",()=>{const t=n.querySelector(".text-effect").textContent,i=n.querySelector(".popup-content");i.textContent=t})});$(document).ready(function(){$("#file-ip-1").change(function(){var n=$(this).val().split("\\").pop();$("#customFileInputLabel").text(n||"آپلود تصویر پروفایل")})});selectedValue=getCookie("selectedValue");selectedValue&&$("#"+selectedValue).next("label").css("background-color","aqua");